import re

def test_patterns():
    test_queries = [
        "–°–∫–æ–ª—å–∫–æ –≤–∏–¥–µ–æ —É –∫—Ä–µ–∞—Ç–æ—Ä–∞ —Å id aca1061a9d324ecf8c3fa2bb32d7be63 –Ω–∞–±—Ä–∞–ª–∏ –±–æ–ª—å—à–µ 10000 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –ø–æ –∏—Ç–æ–≥–æ–≤–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ?",
        "–í–∏–¥–µ–æ –∞–≤—Ç–æ—Ä–∞ —Å id aca1061a9d324ecf8c3fa2bb32d7be63 —Å –ø—Ä–æ—Å–º–æ—Ç—Ä–∞–º–∏ –±–æ–ª—å—à–µ 50000",
        "–°–∫–æ–ª—å–∫–æ –≤–∏–¥–µ–æ —É –∫—Ä–µ–∞—Ç–æ—Ä–∞ id aca1061a9d324ecf8c3fa2bb32d7be63 –Ω–∞–±—Ä–∞–ª–æ –±–æ–ª–µ–µ 100000 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤",
        "–£ –∫—Ä–µ–∞—Ç–æ—Ä–∞ id aca1061a9d324ecf8c3fa2bb32d7be63 –≤–∏–¥–µ–æ —Å –ø—Ä–æ—Å–º–æ—Ç—Ä–∞–º–∏ —Å–≤—ã—à–µ 20000",
        "–°–∫–æ–ª—å–∫–æ –≤–∏–¥–µ–æ —É –∫—Ä–µ–∞—Ç–æ—Ä–∞ —Å id aca1061a9d324ecf8c3fa2bb32d7be63 –Ω–∞–±—Ä–∞–ª–∏ 15000 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –ø–æ –∏—Ç–æ–≥–æ–≤–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ",
    ]
    
    # –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –ü–ê–¢–¢–ï–†–ù–´:
    patterns = [
        # –ü–∞—Ç—Ç–µ—Ä–Ω 1: –ö—Ä–µ–∞—Ç–æ—Ä–∞ —Å id X ... –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ Y ... –∏—Ç–æ–≥–æ–≤–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ
        r'–∫—Ä–µ–∞—Ç–æ—Ä–∞.*id\s+([a-f0-9]{32,}(?:-[a-f0-9-]+)?|\w+).*?–ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤.*?(\d{4,})',
        r'–∫—Ä–µ–∞—Ç–æ—Ä–∞.*id\s+([a-f0-9]{32,}(?:-[a-f0-9-]+)?|\w+).*?–Ω–∞–±—Ä–∞–ª–∏.*?(\d{4,}).*?–∏—Ç–æ–≥–æ–≤–æ–π.*?—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ',
        
        # –ü–∞—Ç—Ç–µ—Ä–Ω 2: –ë–æ–ª–µ–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π - –∏—â–µ–º id –∏ –æ—Ç–¥–µ–ª—å–Ω–æ —á–∏—Å–ª–æ
        r'id\s+([a-f0-9]{32,}(?:-[a-f0-9-]+)?).*?(\d{4,})',
        
        # –ü–∞—Ç—Ç–µ—Ä–Ω 3: –°–Ω–∞—á–∞–ª–∞ —á–∏—Å–ª–æ, –ø–æ—Ç–æ–º id
        r'(\d{4,}).*?id\s+([a-f0-9]{32,}(?:-[a-f0-9-]+)?)',
    ]
    
    print("üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–• –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤")
    print("=" * 60)
    
    for query in test_queries:
        print(f"\nüìã –ó–∞–ø—Ä–æ—Å: {query}")
        query_lower = query.lower()
        
        found = False
        for i, pattern in enumerate(patterns):
            match = re.search(pattern, query_lower, re.IGNORECASE | re.DOTALL)
            if match:
                print(f"‚úÖ –ü–∞—Ç—Ç–µ—Ä–Ω {i+1} —Å—Ä–∞–±–æ—Ç–∞–ª!")
                print(f"   –ì—Ä—É–ø–ø—ã: {match.groups()}")
                
                # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —á—Ç–æ –µ—Å—Ç—å ID, –∞ —á—Ç–æ —á–∏—Å–ª–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
                groups = match.groups()
                if len(groups) == 2:
                    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∫–∞—è –≥—Ä—É–ø–ø–∞ ID, –∫–∞–∫–∞—è —á–∏—Å–ª–æ
                    if re.match(r'[a-f0-9-]{32,}', groups[0]) and groups[1].isdigit():
                        print(f"   ID: {groups[0]}")
                        print(f"   –ü—Ä–æ—Å–º–æ—Ç—Ä—ã: {groups[1]}")
                    elif re.match(r'[a-f0-9-]{32,}', groups[1]) and groups[0].isdigit():
                        print(f"   ID: {groups[1]}")
                        print(f"   –ü—Ä–æ—Å–º–æ—Ç—Ä—ã: {groups[0]}")
                    else:
                        print(f"   –ì—Ä—É–ø–ø–∞ 1: {groups[0]}")
                        print(f"   –ì—Ä—É–ø–ø–∞ 2: {groups[1]}")
                
                found = True
                break
        
        if not found:
            print("‚ùå –ù–∏ –æ–¥–∏–Ω –ø–∞—Ç—Ç–µ—Ä–Ω –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª")
            
            # –£–ª—É—á—à–µ–Ω–Ω—ã–π —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥
            print(f"\nüîç –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥:")
            
            # 1. –ò—â–µ–º ID
            id_match = re.search(r'id\s+([a-f0-9]{32,}(?:-[a-f0-9-]+)?)', query_lower)
            if id_match:
                print(f"   –ù–∞–π–¥–µ–Ω ID: {id_match.group(1)}")
            
            # 2. –ò—â–µ–º —á–∏—Å–ª–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ (—Ç–æ–ª—å–∫–æ 4+ —Ü–∏—Ñ—Ä—ã)
            view_numbers = re.findall(r'\b(\d{4,})\b', query)
            if view_numbers:
                print(f"   –ù–∞–π–¥–µ–Ω—ã —á–∏—Å–ª–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤: {view_numbers}")
                print(f"   –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ: {max(view_numbers, key=int)}")
            else:
                # –ò—â–µ–º –ª—é–±—ã–µ —á–∏—Å–ª–∞
                all_numbers = re.findall(r'\d+', query)
                print(f"   –í—Å–µ —á–∏—Å–ª–∞: {all_numbers}")

if __name__ == "__main__":
    test_patterns()
